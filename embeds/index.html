<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ABC News Live — Embed Test</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; line-height:1.4; padding:20px; }
    .embed-wrap { position:relative; padding-bottom:56.25%; height:0; overflow:hidden; max-width:100%; border:1px solid #ddd; }
    .embed-wrap iframe { position:absolute; top:0; left:0; width:100%; height:100%; border:0; }
    .notice { margin-top:12px; color:#333; }
    pre.cmd { background:#f6f8fa; padding:10px; border-radius:6px; overflow:auto }
    .blocked { color:#a00; font-weight:600 }
  </style>
</head>
<body>
  <h1>ABC News Live — Embed Test</h1>

  <div class="embed-wrap" id="embedWrap">
    <iframe id="abcFrame"
      title="ABC News Live"
      src="https://abcnews.go.com/live/video/special-live-11/"
      allow="autoplay; fullscreen; picture-in-picture"
      allowfullscreen
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>
  </div>

  <p class="notice">If the frame is blocked by the site (common for major broadcasters), you will see an empty area or a browser console error like <code>Refused to display</code>. Use the fallback link below to open the stream directly.</p>

  <p><a href="https://abcnews.go.com/live/video/special-live-11/" target="_blank" rel="noopener">Open ABC News live in a new tab</a></p>

  <h2>Quick header check (run from your machine)</h2>
  <p>To see whether ABC is sending headers that disallow framing, run this in a terminal:</p>
  <pre class="cmd">curl -I https://abcnews.go.com/live/video/special-live-11/ | grep -i -E 'x-frame-options|content-security-policy'</pre>

  <h2>Automated detection (best-effort)</h2>
  <p class="notice">This page will try a best-effort check and show a note if the iframe appears blank after a short timeout.</p>
  <div id="detection" class="notice"></div>

  <script>
    (function(){
      const frame = document.getElementById('abcFrame');
      const det = document.getElementById('detection');
      let loaded = false;

      function showBlocked() {
        det.innerHTML = '<span class="blocked">Embedding appears to be blocked or the player failed to load.</span> Check the browser console for X-Frame-Options or CSP messages, or use the link above.';
      }

      frame.addEventListener('load', function(){
        loaded = true;
        // Even if loaded, it may be cross-origin; indicate success but warn about cross-origin access.
        det.innerHTML = 'Iframe fired load event. If the iframe content looks blank, inspect the browser console for framing/CSP errors.';
      });

      // If load doesn't fire within 3s, assume it's blocked or failed
      setTimeout(function(){
        if (!loaded) {
          showBlocked();
        }
      }, 3000);
    })();
  </script>

  <hr>
  <p style="font-size:0.9em;color:#666">Committed to embeds/index.html — use the raw file or the served page to test embedding behavior. If you want, I can also run a server-side header check and paste the exact headers here.</p>
</body>
</html>